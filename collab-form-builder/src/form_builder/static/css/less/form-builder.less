@import 'collab-less/variables.less';
// Requires setting up `collab-less` symlink in the form_builder/static/css/less folder.
// ln -s ~/[path/to/collab]/theme/less ~/[path/to/local/form-builder]/src/form_builder/static/css/less/collab-less

/**
 *  Utility mixins
 **/

.mb10 {margin-bottom: 10px;}
.mb20 {margin-bottom: 20px;}
.ml20 {margin-left: 20px;}
.p10 {padding: 10px;}
.pb0 {padding-bottom: 0;}
.p20 {padding: 20px;}
.naked {background: 0; border: 0;}
.invis {display: none;}
.italic {font-style: italic;}
.transitionAll {
    -webkit-transition: all .15s ease-in-out;
       -moz-transition: all .15s ease-in-out;
            transition: all .15s ease-in-out;
}
.transition(@transition) {
  -webkit-transition: @transition;
     -moz-transition: @transition;
       -o-transition: @transition;
          transition: @transition;
}
.opacity(@opacity) {
    opacity: @opacity / 100;
    filter: ~"alpha(opacity=@{opacity})";
}


/**
 *  Global rules
 **/

textarea,
input[type="text"],
input[type="password"],
input[type="datetime"],
input[type="datetime-local"],
input[type="date"],
input[type="month"],
input[type="time"],
input[type="week"],
input[type="number"],
input[type="email"],
input[type="url"],
input[type="search"],
input[type="tel"],
input[type="color"],
select {
    height: auto;
    &.disabled-input {
        border: 2px dashed @gray;
        color: @gray;
    }
}

.textinput {
    width: 40%;
}

.input-append {
    .btn {
        border: 1px solid @gray-20;
    }
}

.btn-mini {
    border: 1px solid @gray-20;
}

.btn-link {
    color: @gray;
}

.input-append .btn-datepicker {
    border: 0;
    background-color: transparent;
    margin-left: -5px;
}

.help-block {
    font-size: 0.875em;
}

span.required,
.asteriskField {
    color: @redorange;
    font-family: @bold;
    font-weight: bold;
    margin-left: 4px;
}

.inactive {
    cursor: default;
}

.back,
.download {
    text-decoration: none;
}

.back [class^="icon-"] {
    margin-right: 0.25em;
    color: @pacific;
    font-size: 0.75em;
}


/**
 * jQuery DataTables
 */

.dataTables_length,
.dataTables_filter {
    margin-bottom: 1em;
}
.dataTables_filter {
    float: left;
    text-align: left;
}

table.table.dataTable { // overly-specific to override the jquery.dataTables stylesheet's overly-specific selectors

    width: 100%;
    margin: 1em auto;

    tr {
        background: transparent;
    }
    th {
        padding: 6px 18px 4px 10px;
        border: none;
        background-color: @neutral-20;
        font-family: @demi;
        font-weight: 600;
        letter-spacing: 1px;
        text-transform: uppercase;

        &.sorting_asc,
        &.sorting_desc {
            background-color: @neutral-50;
        }
    }
    td {
        padding: 16px 10px;
        border: none;
        border-bottom: 1px solid @black;
        background: transparent;
    }
    .controls {
        text-align: right;

        a,
        [class^="icon-"] {
            color: @gray-20;
        }

        .tooltip {
            text-align: center;
        }
    }
    tr:hover {
        background: @green-tint;

        .controls a,
        .controls [class^="icon-"] {
            color: @gray;
        }
    }
    tfoot tr {
        border: none;

        &:hover {
          background: none;
        }
    }

} // table.table.dataTable


/**
 * jQueryUI datepicker overrides
 */

#ui-datepicker-div {
    border: 1px solid @neutral-20;
    -webkit-border-radius: 0;
       -moz-border-radius: 0;
            border-radius: 0;
    background-color: white;
}
.ui-datepicker-header {
    background: lighten(@neutral-20, 50%);
    font-family: @demi;
    font-weight: 600;
    -webkit-border-radius: 0;
       -moz-border-radius: 0;
            border-radius: 0;
}
.ui-datepicker .ui-datepicker-prev,
.ui-datepicker .ui-datepicker-next {
    -webkit-border-radius: 0;
       -moz-border-radius: 0;
            border-radius: 0;

    &:hover {
        background: lighten(@neutral-20, 50%);
    }
}
.ui-widget-header .ui-icon {
    cursor: pointer;
}
.ui-datepicker tr td a {
    text-align: center;
}
.ui-datepicker tr td a:hover {
    background: @neutral-20;
}
.ui-state-default,
.ui-widget-content .ui-state-default,
.ui-widget-header .ui-state-default {
    border-color: @neutral-50;
    background: lighten(@neutral-20, 50%);
}
.ui-state-highlight, .ui-widget-content .ui-state-highlight, .ui-widget-header .ui-state-highlight {
    border-color: @gold-50;
    background: @gold-20;
    color: @black;
}


//
// Modals (adapted from Bootstrap's modals.less)
// --------------------------------------------------

// Background
.modal-backdrop {
    position: fixed;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    z-index: 10001;
    background-color: @gray;

    // Fade for backdrop
    &.fade {
        .opacity(0)
    }
}

.modal-backdrop,
.modal-backdrop.fade.in {
    .opacity(60);
}

// Base modal
.modal {
    position: fixed;
    top: 10%;
    left: 50%;
    z-index: 10002;
    width: 560px;
    margin-left: -280px;
    background-color: #FFF;
    // Remove focus outline from opened modal
    outline: none;

    &.fade {
        .transition(e('opacity .3s linear, top .3s ease-out'));
        top: -25%;
    }
    &.fade.in {
        top: 10%;
    }
}

.modal-header {
    padding: 9px 15px;
    border-bottom: 1px solid #eee;

    // Heading
    h3 {
        margin: 0;
        line-height: 30px;
    }
}

// Body (where all modal content resides)
.modal-body {
    position: relative;
    overflow-y: auto;
    max-height: 400px;
    padding: 15px;
}

// Remove bottom margin if need be
.modal-form {
    margin-bottom: 0;
}

// Footer (for actions)
.modal-footer {
    padding: 14px 15px 15px;
    margin-bottom: 0;
    text-align: right; // right align buttons
    background-color: @gray-10;
    border-top: 1px solid @gray-20;

    // Properly space out buttons
    .btn + .btn {
        margin-left: 5px;
        margin-bottom: 0; // account for input[type="submit"] which gets the bottom margin like all other inputs
    }
    // but override that for button groups
    .btn-group .btn + .btn {
        margin-left: -1px;
    }
    // and override it for block buttons as well
    .btn-block + .btn-block {
        margin-left: 0;
    }
}


/**
 *  Home view
 **/

.add-first-prompt {
    font-family: @regular;
}

#forms-table {

    margin-top: 0;

    tr:hover {
        background: @green-tint;
    }
    .controls a {
        display: inline-block;
        padding: 0 0.5em;
        text-align: center;
        text-decoration: none;

        &:hover,
        &:hover [class^="icon-"] {
            color: @black;
        }

        [class^="icon-"] {
            //float: left;
            font-size: 1.1875em;
            line-height: 20px;
            vertical-align: middle;

            &.disabled {
                color: @gray-20;
            }
        }

        small {
            margin-right: 4px;
            font-size: 0.75em;
            line-height: 20px;
            text-align: center;
            vertical-align: middle;
        }
    }

    a {
        text-decoration: none;
    }

    &.ruler {
        background-color: #fff;
    }

    .form-title {
        width: 50%;

        a {
            color: @black;
        }
    }

    .tooltip-arrow {
        display: none;
    }

} // #forms-table

// share modal
#share,
#preview {

    background-color: lighten(@neutral-20, 50%);

    .close {
        position: absolute;
        top: -8px;
        right: -6px;
        z-index: 100;
        font-size: 1.5em;
        line-height: 1;

        &:hover {
            color: @black;
            cursor: pointer;
        }
    }

    .modal-body {
        text-align: center;
    }

    p {
        font-family: @regular;
    }

    input {
        margin: 0;
        width: 500px;
        text-align: center;

        &:focus {
            border-color: @gray-20;
        }
    }

    &.modal.fade.in {
        top: 32%;
    }

} // #share, #preview


/**
 *  theming the bootstrap popover -- TODO: CONFIRM THIS IS NEEDED
 **/

.tooltip, .popover {z-index: 2060 !important;}
.modal .popover, .modal .twipsy {z-index:12000;}
.popover-title {.invis;}

.popover {
  color: #fff;
  width: 300px;
  background-color: #000;
  text-align: center;
  span {
    font-size: .8em;
  }
}
.popover.top .arrow:after {
  border-top-color: #000;
}


/**
 *  Edit view
 **/

.admin {

    // side column with field types
    .admin-tools {

        width: 240px;
        margin-top: -1em;

        h2 {
            margin-bottom: 0.5em;
            font: normal 600 1em/1 @demi;
        }

        ul {
            padding: 0;
            margin: 0;
            list-style-type: none;
        }

        li {
            margin-bottom: 0.75em;

            form {
                margin: 0;

                .add-field {
                    display: block;
                    width: 100%;
                    //max-width: 300px; // fixes wf on page load
                    padding: 0.5em 0.625em;
                    border: 1px solid @black;
                    background: transparent;
                    color: @black;
                    font-family: @demi;
                    font-weight: 600;
                    text-align: left;

                    [class^="icon-"] {
                        display: inline-block;
                        margin-right: 0.25em;
                        color: @black;
                    }
                }
            }
        }

        .form-actions {
            margin: 0;
            padding: 0;
            margin-top: 1em;
            text-align: center;

            .btn {
                padding: 0.25em 0.5em;
            }

            .save-form-button, .preview-form-button {
                width: 49%;
            }
        }

        .affix {
            //max-width: 220px;
            width: 208px;
            padding: 1em;
            position: fixed;
            top: 16px;
            //margin-left: 0;
            background-color: lighten(@neutral-20, 50%);
        }

        .affix-top {
            //max-width: 220px;
            padding: 1em;
            margin-top: 1em;
            //margin-left: 0;
            background-color: lighten(@neutral-20, 50%);
        }

        #messages {
            margin: 1em 0 0;
            font-size: 0.875em;
            line-height: 1.5;
        }

    } // /.admin-tools

    // this is the top area with the global form options
    .form-container {

        label {
            font-family: @demi;
            font-weight: 600;
        }

        input,
        textarea {
            margin-bottom: 2em;
        }

        input[type="text"],
        textarea {
            -webkit-box-sizing: border-box;
               -moz-box-sizing: border-box;
                    box-sizing: border-box;
            width: 100%;
            font-family: @regular;
        }

        .end_date > label {
            position: relative;
            top: -3px;
        }

        .end_date > input {
            width: auto;
            margin: 0 1em 2em;
        }

        input[type="checkbox"] {
            margin-left: 0;
        }

        input + .help_text {
            margin-left: 0.25em;
        }

        .errorlist {
            margin: -1.5em 0 2em;
        }

        .add-first-prompt {
            padding: 1.5em 2em;
            margin-bottom: 2em;
            position: relative;
            background: @green-midtone;

            &:before {
                content: "";
                display: block;
                height: 0;
                border-top: 2.25em solid #FFF;
                border-bottom: 2.25em solid #FFF;
                border-right: 1.125em solid @green-midtone;
                position: absolute;
                left: 0;
                top: 0;
            }
        }

        // hide end and start date until activated
        .timeline {
            .ml20;
            //.invis;

            input {
                width: 60px;
                margin-bottom: -10px;
            }
        }

    } // .form-container

    .fields {

        //min-height: 200px;

        ul {
            padding: 0;
            margin: 0;
            list-style-type: none;

            li {
                margin-bottom: 1.5em;
            }
        }

        .field-options li {
            margin: 0;
        }

        .field-multiple-choice .input-append::before,
        .field-checkboxes .input-append::before {
            margin: 0 0.5em;
            color: @gray;
            font-size: 0.875em;
            font-family: "FontAwesome";
            content: '\f10c';
        }

        .field-checkboxes .input-append::before {
            content: '\f096';
        }

        .field {
            background-color: lighten(@neutral-20, 50%);
            .p20;
            padding-top: 5px;
            padding-bottom: 1px;
            .mb20;

            legend {
                width: 100%;
                border-bottom: 1px solid @neutral-20;
                margin-bottom: 1em;
                font-size: 1.25em;
                line-height: 2;
            }

            .preview-option {
                .invis;
            }

            input, textarea {
                color: @black;
                margin-bottom: 1em;
            }

            .edit-option input {
                width: 50%;
            }

            .form-actions {
                margin: 0;
                padding: 0;
                .naked;
            }

            .required {
                display: inline-block;
                width: 300px;
                .ml20;
            }

            .delete-field {
                .invis;
            }

            .btn-icon {
                background: transparent;
                border: none;

                &.delete i,
                &.trmobr-option i {
                    font-size: 1.1875em;
                }

                &:hover i,
                &:focus i {
                    color: @black;
                }
            }

        } // .field

    } // .fields

    .field-controls {
        float: right;
        button:focus {
            .opacity(100);
        }
    }

    .preview-field {
        border: 2px dashed lighten(@neutral-20, 50%);
        padding: 0 10px;
        .transitionAll;

        .edit-option {
            .invis;
        }

        .field-controls {
            opacity: 0;
            .transitionAll;
        }

        &:hover {
            border: 2px dashed @gray-20;
            .field-controls {
              opacity: 1;
            }
        }
    } // .preview-field

    #preview {
        width: 90%;
        margin-left: -45%;

        .modal-body {
            max-height: 610px;
        }

        &.modal.fade.in {
            top: 10%;
        }
    }
    #preview-frame {
        width: 0;
        height: 0;
    }
    .in #preview-frame {
        width: 100%;
        height: 600px;
    }

} // .admin


/**
 *  Respond views
 **/

.respond {

    h2 {
        font-size: 1.5em;
        margin-bottom: 1em;

        b {
            font: 500 1em @medium;
        }
    }

    .back {
        display: block;
        top: 0;
        margin: 2em 0;
    }
    .print {
        float: right;
        text-decoration: none;
    }

    .instructions,
    .help-block {
        color: @gray;
        font-family: @italic;
        font-style: italic;
        font-weight: normal;
    }

    form {
        margin-top: 30px;
    }

    .control-group {
        border-top: 1px solid lighten(@neutral-20, 50%);
        padding-top: 10px;
        margin-top: 10px;
        padding-left: 20px;
    }

    .control-label {
        font-family: @demi;
        font-weight: 600;

        > span {
            margin-left: 6px;
        }

        label {
            font-family: @regular;
            font-weight: normal;
        }
    }

    .control-group .radio,
    .control-group .checkbox {
        display: block;
    }

    input[type="text"] {
        width: 40%;
    }
    input.dateinput {
        width: 20%;
    }
    input[type="checkbox"],
    input[type="radio"] {
        margin-left: 0;
    }

    .help-inline {
        margin-left: 0.5em;

        strong {
            font: 500 1em/1 @medium;
        }
    }

    .textAreaCountMessage {
        padding-left: 20px;
    }

    .form-actions {
        .naked;
        border-top: 4px solid @black;
        padding: 20px 0 0 20px;
        margin: 2em 0;
    }

} // .respond


/**
 *  Thanks view
 **/

.thanks h1 {
    margin-bottom: 0.5em;
}


/**
 *  Results view
 **/

.back {
    position: relative;
    top: -1.25em;
}
h3 {
    font-size: 1.5em;
    line-height: 1.25;
}
.csv-links {
    position: relative;
    top: -1.75em;
    line-height: 1.875;
    text-align: right;

    .download {
        margin-left: 6px;
    }
}

.show-buttons {
    width: 350px;
    float: right;
    position: relative;
    top: 1.5em;
    z-index: 100;
}
.show-buttons legend {
    float: left;
    font-size: 1em;
    line-height: 1.5;
}
.show-buttons label {

}
.show-buttons input[type="radio"] {
    margin-top: 0;
    float: none;
    vertical-align: text-top;
}
.toggle-status {
    text-decoration: none;
}


/**
 * jQuery sortable stuff
 */

.draggable {
    height: 20px;
    cursor: hand;
    cursor: grab;
    cursor: -moz-grab;
    cursor: -webkit-grab;
}

.sort-fields-placeholder {
    height: 120px;
    border: 2px dashed @gray-50;
    margin-bottom: 1em;
    background-color: #fff !important;
}

.ui-sortable-helper .draggable {
    cursor: move;
    cursor: grabbing;
    cursor: -moz-grabbing;
    cursor: -webkit-grabbing;
}


/*
 * Print styles
 */

@media print {
    .print,
    .form-actions,
    .respond .back {
        display: none;
    }
    .respond h2 {
        font-size: 1.25em;
    }
    .respond .instructions,
    .respond .help-block {
        color: @darkgray;
    }
}

